<% content_for :title, "Students" %>

<div class="d-flex justify-content-end">
  <%= link_to "New Student", new_student_path, class: "btn btn-success mt-3" %>
</div>

<div class="students-container">
  <table class="table table-bordered table-striped">
  <thead>
      <!-- Title Row -->
        <tr>
          <th colspan="7" class="table-title">Students</th>
        </tr>

      <!-- Header Row -->
        <tr>
          <th>Name</th>
          <th>Year Level</th>
          <th>Program</th>
          <th>Department</th>
          <th>Number of Units</th>
          <th>Total Assessment</th>
          <th>Actions</th>
        </tr>
      </thead>
      
      <tbody>
      <% @students.each do | student | %>
          <tr>
            <td><%= student.name %></td>
            <td><%= student.year_level %></td>
            <td><%= student.program %></td>
            <td><%= student.department.name %></td>
            <td><%= student.number_of_units %></td>
            <td><%= student.total_assessment %></td>
            <td> 
              <%= link_to "Show", student, class: "btn btn-sm", style: "background-color: #343a40; color: white;" %>
              <%= link_to "Edit", edit_student_path(student), class: "btn btn-sm btn-warning" %>
              <%= link_to "Delete", "#", 
                class: "btn btn-danger btn-sm", 
                data: { bs_toggle: "modal", bs_target: "#confirmDeleteModal", student_url: student_path(student) } %>
          </tr>
        <% end %>
      </tbody>
    </table>

</div>

<!-- Bootstrap Confirmation Modal -->
<div class="modal fade" id="confirmDeleteModal" tabindex="-1" aria-labelledby="confirmDeleteLabel" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content">
      <div class="modal-header bg-danger text-white">
        <h5 class="modal-title" id="confirmDeleteLabel">Confirm Delete</h5>
        <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        Are you sure you want to delete this student?
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
        <a href="#" id="confirmDeleteBtn" class="btn btn-danger">Delete</a>
      </div>
    </div>
  </div>
</div>

